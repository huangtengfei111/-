# 分布式锁







###



![03_zookeeper的分布式锁原理](E:\U盘\视频\42_分布式锁是啥？对比下redis和zk两种分布式锁的优劣？\03_zookeeper的分布式锁原理.png)

```
临时顺序节点实现分布式锁

zookeeper实现分布式锁
	分布式多个节点注册同一个锁，当一个节点注册锁，设置锁成功的话，进行对应的操作，使用完成后，释放锁，
	如果对于该锁的注册失败后，在zookeeper上注册一个该锁的监听，当该锁被释放后通知该node，重新注册锁，
	
zk分布式锁，其实可以做的比较简单，就是某个节点尝试创建临时znode，此时创建成功了就获取了这个锁；这个时候别的客户端来创建锁会失败，只能注册个监听器监听这个锁。释放锁就是删除这个znode，一旦释放掉就会通知客户端，然后有一个等待着的客户端就可以再次重新枷锁。	
```

